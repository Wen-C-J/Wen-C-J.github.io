<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms.Qiu</title>

    <!-- å¯¼å…¥å­—ä½“åŒ… -->
    <link rel="stylesheet" href="CSS/Font_Style/index.css">

    <!-- å¯¼å…¥jqåŒ…ï¼Œå¤åˆ¶ä»£ç ä¼šç”¨åˆ° -->
    <script src="./JS/JS_Jquery/jquery.min.js"></script>
    <script src="./JS/JS_Jquery/jquery.copy.js"></script>
    <script src="./JS/index.js"></script>

    <!-- å­—ä½“å›¾æ ‡ - åŒ…å¯¼å…¥ -->
    <script src="./CSS/Font_Picture/iconfont.js"></script>
    <style>
        .icon {
          width: 1em;
          height: 1em;
          vertical-align: -0.15em;
          fill: currentColor;
          overflow: hidden;
        }
    </style>

    <style>
        body,html{
            background-color: rgb(255,127,80);
            font-size: 17px;
            font-family: "é€šç”¨å­—ä½“";
        }
        *{
            padding: 0;
            margin: 0;
        }
        li{
            list-style: none;
        }
        #Main{
            width: 100%;
        }
        #title{     /* æ ‡é¢˜è¡Œ - å¼¹æ€§ç›’å­å¸ƒå±€*/
            background-color: darkcyan;
            color: white;
            padding: 20px;
            font-family: "æ–¹æ­£å‘å–Šå­—ä½“";
            font-size: 30px;
            display: flex;
            flex-direction: row;
            justify-content: space-between;     /* å¹³å‡åˆ†é… - é—´éš”æ•£å¼€*/
            align-items: center;
        }
        #content{
            background-color: coral;
            padding: 20px 15px 15px 10px;
        }
        .Dta_List{
            background-color: rgb(255,216,103);
            margin-bottom: 15px;
            padding: 8px;
            border-width: 3px;     /* è¾¹æ¡†ç²—ç»† */
            border-radius: 20px;
            border-style: dashed;   /* è¾¹æ¡†çº¿æ ·å¼ */
            box-shadow: 5px 4px 5px gray;
            border-color:red rgb(0,0,0) rgb(0,0,0) red;    /* è®¾ç½®è¾¹æ¡†é¢œè‰² */
            display: flex;
            flex-direction: row;
            justify-content: space-around;
        }
        .Logo{
            width: 60px;
            height: 60px;
            margin: auto 5px;
            font-size: 40px;
            background-color: rgb(255,127,80,0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-width: 3px;     /* è¾¹æ¡†ç²—ç»† */
            border-radius: 100%;
            border-style: dashed;   /* è¾¹æ¡†çº¿æ ·å¼ */
            box-shadow: 5px 4px 5px gray;
            border-color:red rgb(0,0,0) rgb(0,0,0) red;    /* è®¾ç½®è¾¹æ¡†é¢œè‰² */
        }
        .information{
            flex:1;
            margin-left: 10px;
        }
        .remarks{
            padding: 3px 15px;
            background-color: rgb(0,139,139,0.7);
            border-width: 3px;     /* è¾¹æ¡†ç²—ç»† */
            border-radius: 20px;
            border-style: dashed;   /* è¾¹æ¡†çº¿æ ·å¼ */
            box-shadow: 5px 4px 5px gray;
            border-color:red rgb(0,0,0) rgb(0,0,0) red;    /* è®¾ç½®è¾¹æ¡†é¢œè‰² */
        }
        .User_Password{
            padding: 6px;
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 6px 5px;
        }
        .User_Password span{
            padding: 2px;
            background-color: rgb(255, 179, 0,0.3);
            text-align: center;
            border-width: 2px;     /* è¾¹æ¡†ç²—ç»† */
            border-radius: 20px;
            border-style: dashed;   /* è¾¹æ¡†çº¿æ ·å¼ */
            box-shadow: 5px 4px 5px gray;
            border-color:red rgb(0,0,0) rgb(0,0,0) red;    /* è®¾ç½®è¾¹æ¡†é¢œè‰² */
        }
        #Add{
            background-color: rgb(255,216,103);
            margin : 0px 15px 30px;
            padding: 15px 0px;
            font-size: 30px;
            border-width: 3px;     /* è¾¹æ¡†ç²—ç»† */
            border-radius: 20px;
            border-style: dashed;   /* è¾¹æ¡†çº¿æ ·å¼ */
            box-shadow: 5px 4px 5px gray;
            border-color:red rgb(0,0,0) rgb(0,0,0) red;    /* è®¾ç½®è¾¹æ¡†é¢œè‰² */
            display: flex;
            flex-direction: row;
            justify-content: space-around;
        }
    </style>
    <SCript>
        
    </SCript>
</head>
<body>
    <div id="Main">
        <div id="title">
            <li id="Remind" style="color: white;">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-wenhao_04"></use>
                </svg>
            </li>
            <span>æ ‡é¢˜</span>
            <li id="input_Output" class="">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-daoru"></use>
                </svg>
            </li>
        </div>
        <ul id="content">
            
            <li class="Dta_List">
                <div class="Logo">
                    <svg class = "icon" aria-hidden="true">
                        <use xlink:href="#icon-${item.icon}"></use>
                    </svg>
                </div>
                <div class="information">
                    <div class="remarks">æ•°æ®åŠ è½½å¤±è´¥â€¦â€¦</div>
                    <div class="User_Password">
                        <span>è´¦å·</span>
                        <span class="copy">${item.UserName}</span>
                        <span>å¯†ç </span>
                        <span class="copy">${item.PassWord}</span>
                    </div>
                </div>
            </li>

        </ul>
        <div id="Add">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-new_02"></use>
            </svg>
        </div>
    </div>
</body>

<script>
    /* --------------- æ•°æ®åˆå§‹åŒ– --------------- */
    var localStorage_Data = localStorage.getItem("Data")    // è·å–æµè§ˆå™¨æœ¬åœ°æ•°æ®
    if(localStorage_Data == null){  // åˆ¤æ–­æ˜¯å¦æœ‰æ•°æ®
        console.log("localStorage - æœ¬åœ°å­˜å‚¨å™¨ä¸­æ— æ•°æ®ï¼Œå¼€å§‹åˆå§‹åŒ–ï¼")
        var xhr = new XMLHttpRequest();
        xhr.open("GET","./Data.JSON")
        xhr.send()
        xhr.onreadystatechange = function(){
            if(xhr.readyState === 4){
                var JSON_Data = xhr.responseText
                localStorage.setItem("Data",JSON_Data)
                // console.log(localStorage.getItem("Data"));
                console.log("æ•°æ®åˆå§‹åŒ–å®Œæˆï¼" + JSON.parse(localStorage.getItem("Data")) + "å³å°†åˆ·æ–°æµè§ˆå™¨ï¼");
                location.reload();
            }
        }
    }else{
        console.log("æœ¬åœ°å‚¨å­˜å™¨ä¸­å­˜åœ¨æ•°æ® ï¼š" + JSON.parse(localStorage_Data));
    }


    
    /* --------------- Map - æ˜ å°„æ•°æ®åˆ°é¡µé¢ --------------- */
    var JSON_Data = JSON.parse(localStorage.getItem("Data"));   // è·å–æœ¬åœ°å­˜å‚¨å™¨çš„Dataå˜é‡å†…å®¹
    var Arr_Data = JSON_Data.User       // è·å–æ–¹æ³•é‡Œé¢çš„æ•°ç»„ä¿¡æ¯
    var Arr_List = Arr_Data.map(function(item){
        return `<li class="Dta_List">
            <div class="Logo" id="${Arr_Data.indexOf(item)}">
                <svg class = "icon" aria-hidden="true">
                    <use xlink:href="#icon-${item.icon}"></use>
                </svg>
            </div>
            <div class="information">
                <div class="remarks">${item.Remarks}</div>
                <div class="User_Password">
                    <span>è´¦å·</span>
                    <span class="copy">${item.UserName}</span>
                    <span>å¯†ç </span>
                    <span class="copy">${item.PassWord}</span>
                </div>
            </div>
        </li>`
    })

    // å°†ç”Ÿæˆçš„æ ‡ç­¾æ‰“å°åˆ°é¡µé¢ä¸­
    document.querySelector("#content").innerHTML = Arr_List.join("")



</script>

<script src="./JS/index.js"></script>       <!-- å°è£…JSä»£ç ï¼ˆå¤åˆ¶ã€é˜²æ­¢é—ªé€€â€¦ç­‰åŠŸèƒ½ï¼‰ -->

<script>
    /* --------------- é¡¶éƒ¨ å·¦ä¾§ - æé†’æŒ‰é’® ç‚¹å‡»äº‹ä»¶ --------------- */
    Remind.onclick = function(){
        alert(`ğŸ“ƒ  éšè—åŠŸèƒ½æç¤º ğŸ› 

    ğŸ“Œå¿«é€Ÿå¤åˆ¶è´¦å·å¯†ç ä¿¡æ¯
        â¾ ç‚¹å‡»è´¦å· ã€å¯†ç ä¿¡æ¯çš„å†…å®¹éƒ¨åˆ†ï¼

    ğŸ“Œæ·»åŠ ä¿¡æ¯å¡ç‰‡
        â¾ ç‚¹å‡»é¡µé¢åº•éƒ¨æŒ‰é’® -> å¡«å†™ä¿¡æ¯

    ğŸ“Œåˆ é™¤ä¿¡æ¯å¡ç‰‡
        â¾ å¿«é€ŸåŒå‡»å¡ç‰‡ä¸­çš„å¤´åƒéƒ¨åˆ†

    ğŸ“Œæ•°æ®å¯¼å…¥åŠŸèƒ½
        â¾ é¡µé¢å³ä¸Šè§’æŒ‰é’® -> â€œå–æ¶ˆâ€ -> å‰ªåˆ‡æ¿å†…å®¹å‘ç»™å¥½å‹

    ğŸ“Œæ•°æ®å¯¼å…¥åŠŸèƒ½
        â¾ é¡µé¢å³ä¸Šè§’æŒ‰é’® -> â€œç¡®å®šâ€ -> è¾“å…¥ä¿¡æ¯`)
    }

    /* --------------- é¡¶éƒ¨ å³ä¾§ - å¯¼å…¥/å¯¼å‡ºæŒ‰é’® ç‚¹å‡»äº‹ä»¶ --------------- */
    input_Output.onclick = function(){
        var Data = confirm(" --> æ˜¯å¦è¦è¿›è¡Œæ•°æ®å¯¼å…¥ï¼Ÿ\nã€ç¡®å®šã€‘-  å¯¼å…¥\nã€å–æ¶ˆã€‘-  å¯¼å‡º")
        // console.log(Data);
        if(Data){
            console.log("ç‚¹å‡»äº†â€œç¡®å®šâ€");
            var Input = window.prompt("è¯·è¾“å…¥å¯¼å…¥æ•°æ®ï¼ˆæ‰¹é‡å¯¼å…¥ï¼‰ï¼");
            console.log(typeof(Input) + "ï¼š" + Input);
            if(/\{.*?User.*?\}/.test(Input)){   // åˆ¤æ–­å¯¼å…¥æ•°æ®çš„æœ‰æ•ˆæ€§è´¨
                console.log("æ•°æ®ä¼ å…¥å®Œæˆï¼Œæ­£åœ¨è§£æï¼Œè§£æå®Œæˆåå³å°†åˆ·æ–°é¡µé¢!");
                localStorage.setItem("Data",Input)
                location.reload()       // æ•°æ®æ›´æ–°å®Œæˆ - åˆ·æ–°é¡µé¢ï¼
            }else{
                alert("æ•°æ®æ ¼å¼ä¸ç¬¦åˆï¼");
            }
        }else{
            console.log("ç‚¹å‡»äº†â€œå–æ¶ˆâ€");
            
            var localStorage_Data = localStorage.getItem("Data");
            $.copy({
            content:localStorage_Data,
            callback:function(){
                alert("ã€æ•°æ®å¯¼å‡º æˆåŠŸ - Successã€‘\n--> å†…éƒ¨æ•°æ®å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼")
            }
        });
        }
    }

    /* --------------- å¤´åƒ - ç‚¹å‡»åˆ é™¤ä¿¡æ¯äº‹ä»¶ --------------- */
    var icon_List = document.querySelectorAll(".Logo")
    for(var i = 0 ; i < icon_List.length ; i++){
        // console.log(icon_List[i])
        icon_List[i].ondblclick = function(){
            var Temp_ondblclick = confirm("ä½ ç¡®å®šè¦åˆ é™¤è¿™æ¡æ•°æ®å—ï¼Ÿ")
            if(Temp_ondblclick){
                var localStorage_Data = JSON.parse(localStorage.getItem("Data"));
                console.log(localStorage_Data);
                localStorage_Data.User.splice(this.id,1)
                console.log(localStorage_Data);
                localStorage.setItem("Data",JSON.stringify(localStorage_Data))
                console.log("è¯»å–æœ¬åœ°ï¼š" + localStorage.getItem("Data"));
                location.reload();
            }
        }
    }

    /* --------------- åº•éƒ¨æ–°å¢æŒ‰é’® - æ–°å¢ä¿¡æ¯ --------------- */
    Add.onclick = function(){
        // åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶è®¾å®šåˆå§‹å€¼
        var Temp_Obj = {Key:"1",
                        icon:"nes_01",
                        UserName:"ç”¨æˆ·æœªè¾“å…¥",
                        PassWord:"ç”¨æˆ·æœªè¾“å…¥",
                        Remarks:"ç”¨æˆ·æœªè¾“å…¥"
                        }
        // ä¿å­˜ç”¨æˆ·è¾“å…¥ä¿¡æ¯ï¼Œæ›¿æ¢åˆå§‹å€¼
        Temp_Obj.UserName = prompt("è¯·è¾“å…¥è´¦å·ï¼")
        Temp_Obj.PassWord = prompt("è¯·è¾“å…¥å¯†ç ï¼")
        Temp_Obj.Remarks = prompt("è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯")
        console.log(Temp_Obj);
        
        // è·å–æµè§ˆå™¨å†…éƒ¨localStorageå­˜å‚¨å™¨ä¸­Dataçš„å€¼
        var Temp_Data = JSON.parse(localStorage.getItem("Data"))
        
        Temp_Data.User.unshift(Temp_Obj)

        console.log("æ•°æ®æ›´æ–°å®Œæˆ" + Temp_Data);

        // æ–°æ•°æ®å­˜å…¥localStorageå­˜å‚¨å™¨
        localStorage.setItem("Data",JSON.stringify(Temp_Data))
        console.log(localStorage.getItem("Data"));

        location.reload()

    }

    /* --------------- æµ‹è¯•æŒ‰é’® - æ•°æ®é‡ç½®ï¼ˆç‚¹å‡»æ ‡é¢˜ï¼‰ --------------- */
    // document.querySelector("#title span").onclick = function(){
    //     localStorage.clear();
    //     console.log("localStorage - å·²æ¢å¤åˆå§‹åŒ–æ•°æ®");
    //     location.reload();
    // }

</script>
</html>