<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css">
    <script src="Warehouse.js"></script>
</head>
<body>
    <div id="main">
        <div>Test</div>
    </div>
    <script>
        var Browser_height = window.innerHeight // 获取浏览器高度
        var Browser_width = window.innerWidth      // 获取浏览器宽度
        var information_Date = [        // 定义对象，存放数据
            {title:"Wen",url:"http://www.baidu.com"},
            {title:"温",url:"http://www.baidu.com"},
            {title:"Wen",url:"http://www.baidu.com"},
            {title:"温",url:"http://www.baidu.com"},
            {title:"Wen",url:"http://www.baidu.com"},
            {title:"温",url:"http://www.baidu.com"},
        ];

        // 将数组的内容转换成对应的标签样式
        var Date_List = information_Date.map(function(item){
            var Boll_Size = randomNum(100,150)    // 球的随机大小
            var Boll_backgroundColor = getColor()   // 球的随机颜色
            var Boll_X = randomNum(20,Browser_width - Boll_Size - 20)   // 球的X轴随机坐标
            var Boll_Y = randomNum(20,Browser_height - Boll_Size - 20)  // 球的Y轴随机坐标
            return `<div class="boll" style="
                width: ${Boll_Size}px;
                height: ${Boll_Size}px;
                background-color: ${Boll_backgroundColor};
                left:${Boll_X}px;
                top:${Boll_Y}px"
                onclick="location.href = '${item.url}'">
            ${item.title}
        </div>`
        })
        // 将生成的标签打印到指定标签中
        document.querySelector("#main").innerHTML = Date_List.join("")

        // 利用冒泡定义全局点击事件
        document.body.onclick = function(){
            console.log("触发 document.body - 点击事件")
            alert("当前小球个数："+information_Date.length)
        }

        // 获取class属性为boll的所有标签
        var boll_itens = document.getElementsByClassName("boll")
        var gox = [1,1] ;   // x轴碰壁方向计算函数
        var goy = [1,1] ;   // y轴碰壁方向计算函数
        var angle_X = []    // x轴弹射角度
        var angle_Y = []    // x轴弹射角度

        // 通过数组遍历对数组属性值进行初始化
        for(var i = 0 ; i < information_Date.length ; i++){
            gox[i] = 1;
            goy[i] = 1;
            angle_X[i] = randomNum(-3,3)
            angle_Y[i] = randomNum(-3,3)
            if(angle_X[i] == 0){angle_X[i] = 1}
            if(angle_Y[i] == 0){angle_Y[i] = 1}
        }

        // 设定 - 定时器
        var timer = setInterval(function(){
            for(var i = 0 ; i < boll_itens.length ; i++){
                var x = boll_itens[i].offsetLeft    // 获取小球当前的x轴偏移量
                var y = boll_itens[i].offsetTop     // 获取小球当前的y轴偏移量
                if(x > Browser_width - parseInt(boll_itens[i].style.width)-10 || x < 0){
                    gox[i] = -gox[i]    // 碰壁之后值做个取反
                }
                if(y > Browser_height - parseInt(boll_itens[i].style.width)-10 || y < 0){
                    goy[i] = -goy[i]    // 碰壁之后值做个取反
                }
                boll_itens[i].style.left = x + angle_X[i]*gox[i] + "px"
                boll_itens[i].style.top = y + angle_X[i]*goy[i] + "px"
            }
        },16)   // 16毫秒/刷新一次  -  相对于60帧/秒
    </script>
</body>
</html>